<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­å…¨èƒ½åˆ·é¢˜ (ç“®äº‘å‡åƒé¸¡å¾ˆèœç‰ˆ)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer onerror="window.pdfLoadError=true"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" defer></script>
    
    <style>
        :root {
            --primary: #2c3e50; 
            --blue-mode: #3498db;   /* é•¿éš¾å¥ */
            --gold-mode: #f39c12;   /* é‡‘å¥ */
            --green-mode: #27ae60;  /* é€‰æ‹©é¢˜ */
            --bg: #f0f3f6; 
            --card-bg: #ffffff;
        }

        body { font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; margin: 0; padding: 20px; background: var(--bg); color: #333; overflow-x: hidden; }
        .container { max-width: 1000px; margin: 0 auto; display: none; padding-bottom: 60px; }

        /* --- åŠ¨ç”»å¼•æ“ --- */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .anim-item { opacity: 0; animation: fadeInUp 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; }

        /* é¡¶éƒ¨å¯¼èˆª */
        .header { text-align: center; margin-bottom: 30px; animation: fadeInUp 0.6s ease; }
        .nav-tabs { display: flex; justify-content: center; gap: 12px; margin-top: 20px; flex-wrap: wrap; }
        
        .nav-btn {
            padding: 10px 22px; border: none; border-radius: 50px; cursor: pointer;
            font-size: 15px; font-weight: bold; transition: all 0.3s;
            background: #e0e0e0; color: #7f8c8d; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex; align-items: center; gap: 6px;
        }
        .nav-btn:hover { transform: translateY(-2px); }
        .nav-btn.active { color: white; transform: scale(1.05); box-shadow: 0 8px 15px rgba(0,0,0,0.15); }
        
        .nav-btn[data-theme="blue"].active { background: var(--blue-mode); }
        .nav-btn[data-theme="gold"].active { background: var(--gold-mode); }
        .nav-btn[data-theme="green"].active { background: var(--green-mode); }
        .nav-btn[data-theme="red"].active { background: #c0392b; }

        /* æ¨¡å—å®¹å™¨ */
        .section { display: none; }
        .section.active { display: block; }

        /* æ§ä»¶æ  */
        .control-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; animation: fadeInUp 0.4s ease; flex-wrap: wrap; gap: 10px; }
        .btn-refresh { padding: 10px 25px; border-radius: 25px; color: white; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.1); font-size: 14px; display: flex; align-items: center; gap: 5px; }
        .btn-refresh:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,0,0,0.15); }
        
        /* ================= å¡ç‰‡æ ·å¼ ================= */
        /* é•¿éš¾å¥ */
        .trans-card {
            background: #fff; border-radius: 12px; padding: 25px; margin-bottom: 20px;
            border-left: 5px solid var(--blue-mode); box-shadow: 0 3px 10px rgba(52, 152, 219, 0.1);
            transition: 0.3s; position: relative;
        }
        .cn-text { font-size: 18px; font-weight: 600; margin-bottom: 15px; color: #2c3e50; line-height: 1.6; }
        .en-box { background: #f0f7fb; padding: 20px; border-radius: 8px; margin-top: 15px; display: none; border: 1px solid #d6eaf8; }
        .en-text { font-size: 16px; color: #2980b9; font-weight: 500; font-family: 'Segoe UI', sans-serif; line-height: 1.5; }
        
        .mp-badge { 
            position: absolute; top: 15px; right: 15px; 
            background: #ecf0f1; color: #7f8c8d; font-size: 12px; padding: 3px 8px; border-radius: 4px; font-weight: bold;
        }

        /* é‡‘å¥å¡ç‰‡ (3D) */
        .flash-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; perspective: 1000px; }
        .flashcard-container { background: transparent; height: 160px; width: 100%; perspective: 1000px; cursor: pointer; }
        .flashcard-inner {
            position: relative; width: 100%; height: 100%; text-align: center;
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d; box-shadow: 0 4px 10px rgba(243, 156, 18, 0.15); border-radius: 15px;
        }
        .flashcard-container.flipped .flashcard-inner { transform: rotateY(180deg); }
        .flash-front, .flash-back {
            position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-radius: 15px; padding: 15px; box-sizing: border-box; border: 2px solid #f9e79f; background: white;
        }
        .flash-front { color: #555; font-weight: bold; font-size: 16px; }
        .flash-back { background: #fef9e7; transform: rotateY(180deg); border-color: #f39c12; color: #d35400; justify-content: space-between; }
        .flash-en-text { font-size: 15px; font-weight: bold; margin-top: 5px; line-height: 1.4; }
        .flash-btns { display: flex; gap: 8px; width: 100%; justify-content: center; margin-top: 5px; z-index: 10; pointer-events: auto; }

        /* é€‰æ‹©é¢˜å¡ç‰‡ */
        .quiz-card {
            background: #fff; border-radius: 12px; padding: 25px; margin-bottom: 20px;
            border-top: 4px solid var(--green-mode); box-shadow: 0 4px 15px rgba(39, 174, 96, 0.08);
        }
        .q-text { font-size: 18px; margin-bottom: 20px; font-weight: 600; }
        .opt-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .opt-btn { 
            padding: 15px; border: 2px solid #f0f0f0; border-radius: 10px; cursor: pointer; 
            background: #fff; transition: 0.2s; font-size: 15px;
        }
        .opt-btn:hover { border-color: var(--green-mode); background: #f9fff9; }
        .opt-btn.correct { background: #d4edda; border-color: #28a745; color: #155724; font-weight: bold; }
        .opt-btn.wrong { background: #f8d7da; border-color: #dc3545; color: #721c24; opacity: 0.7; }
        .quiz-feedback { margin-top: 20px; padding: 15px; background: #e8f5e9; border-left: 4px solid var(--green-mode); border-radius: 4px; color: #2e7d32; display: none; animation: fadeInUp 0.3s ease; }

        /* é€šç”¨æŒ‰é’® */
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; transition: 0.2s; font-size: 13px; }
        .btn:hover { transform: scale(1.05); }
        .btn:active { transform: scale(0.95); }
        .btn-reveal { background: #95a5a6; width: 100%; padding: 12px; font-size: 14px; }
        .btn-yes { background: #27ae60; box-shadow: 0 2px 5px rgba(39, 174, 96, 0.3); }
        .btn-no { background: #e74c3c; box-shadow: 0 2px 5px rgba(231, 76, 60, 0.3); }
        
        /* äº¤äº’æç¤º (Toast) */
        #toast-container { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 9999; }
        .toast {
            background: rgba(0,0,0,0.8); color: white; padding: 12px 25px; border-radius: 30px;
            margin-top: 10px; font-size: 14px; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; align-items: center; gap: 8px;
        }
        .toast.success { background: #27ae60; }
        .toast.error { background: #e74c3c; }

        /* é”™é¢˜æœ¬ */
        #mistake-list { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .mistake-item { padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .mistake-item:last-child { border-bottom: none; }
        
        #loading-screen { text-align: center; padding-top: 100px; color: #7f8c8d; }
    </style>
</head>
<body>

<div id="toast-container"></div>

<div id="loading-screen">
    <h2>ğŸš€ æ­£åœ¨åˆå§‹åŒ–å…¨é‡é¢˜åº“...</h2>
    <p>å¦‚æœæ— å“åº”ï¼Œè¯·ç‚¹å‡» <button onclick="hardReset()" style="padding:5px 10px;">ğŸ› ï¸ ä¿®å¤æ•°æ®</button></p>
</div>

<div class="container" id="app-content">
    <div class="header">
        <h2 style="margin:0; color:#2c3e50;">è‹±è¯­å…¨èƒ½åˆ·é¢˜ <span style="font-size:14px; font-weight:normal; color:#aaa;">ç“®äº‘å‡åƒé¸¡å¾ˆèœç‰ˆ</span></h2>
        <div class="nav-tabs">
            <button class="nav-btn active" data-theme="blue" onclick="switchTab('bigTrans', this)">ğŸ“˜ é•¿éš¾å¥ç‰¹è®­</button>
            <button class="nav-btn" data-theme="gold" onclick="switchTab('goldTrans', this)">ğŸŒŸ é‡‘å¥é€Ÿè®°</button>
            <button class="nav-btn" data-theme="green" onclick="switchTab('quiz', this)">ğŸ“ è¯­æ³•é€‰æ‹©</button>
            <button class="nav-btn" data-theme="red" onclick="switchTab('mistakes', this)">ğŸ“• é”™é¢˜æ¡£æ¡ˆ</button>
        </div>
    </div>

    <div id="bigTrans" class="section active">
        <div class="control-bar">
            <span style="color:var(--blue-mode); font-weight:bold;">å¥å¯¹å¥ç²¾è¯» (5å¥/ç»„)</span>
            <button class="btn btn-refresh" style="background:var(--blue-mode)" onclick="renderBigTrans()">ğŸ”„ æ¢ä¸‹ä¸€ç»„ (5å¥)</button>
        </div>
        <div id="bigTrans-list"></div>
    </div>

    <div id="goldTrans" class="section">
        <div class="control-bar">
            <span style="color:var(--gold-mode); font-weight:bold;">å¿«é€Ÿåˆ·è¯ (15è¯/ç»„)</span>
            <button class="btn btn-refresh" style="background:var(--gold-mode)" onclick="renderGoldTrans()">ğŸ”„ æ¢ä¸‹ä¸€ç»„ (15è¯)</button>
        </div>
        <div id="goldTrans-list" class="flash-grid"></div>
    </div>

    <div id="quiz" class="section">
        <div class="control-bar">
            <span style="color:var(--green-mode); font-weight:bold;">ç¬¬ä¸€é¢˜å•é€‰/å¡«ç©º (10é¢˜/ç»„)</span>
            <button class="btn btn-refresh" style="background:var(--green-mode)" onclick="renderQuiz()">ğŸ”„ æ¢ä¸‹ä¸€ç»„ (10é¢˜)</button>
        </div>
        <div id="quiz-list"></div>
    </div>

    <div id="mistakes" class="section">
        <div class="control-bar">
            <strong>ğŸ”¥ é‡ç‚¹å…³æ³¨ (è®°å¿†ç‚¹æ•° > 12)</strong>
            <div>
                <button class="btn" style="background:#34495e" onclick="exportPDF()">ğŸ“„ å¯¼å‡ºPDF</button>
                <button class="btn btn-no" onclick="hardReset()">ğŸ—‘ï¸ æ¸…ç©ºæ•°æ®</button>
            </div>
        </div>
        <div id="mistake-list"></div>
    </div>
</div>

<script>
    // ================= å…¨é‡æ•°æ®åº“ (Full Database) =================
    
    // 1. é•¿éš¾å¥ (Big Trans) - ä¿®æ­£äº†AIéƒ¨åˆ†
    const bigTransDB = [
        // Global Warming
        { id: "bt_1", cn: "ä¸­å›½æ˜¯ä¸€ä¸ªå¹…å‘˜è¾½é˜”ã€æµ·å²¸çº¿é•¿çš„å›½å®¶ï¼Œå—å…¨çƒå˜æš–çš„ä¸åˆ©å½±å“å¾ˆå¤§ã€‚", en: "China is a vast country with a long coastline and is heavily affected by the adverse effects of global warming." },
        { id: "bt_2", cn: "ä¸­å›½æ­£é‡‡å–ç§¯ææªæ–½ä»¥åº”å¯¹å…¨çƒå˜æš–ã€‚", en: "China is taking active measures to combat global warming." },
        { id: "bt_3", cn: "ä¸€ã€å®æ–½å¯æŒç»­å‘å±•æˆ˜ç•¥ï¼ŒåŠ å¼ºç¯å¢ƒä¿æŠ¤ã€‚", en: "Firstly, it will implement the strategy of sustainable development and strengthen environmental protection." },
        { id: "bt_4", cn: "äºŒã€æ¨è¿›èŠ‚èƒ½å‡æ’ï¼Œæ§åˆ¶ç¢³æ’æ”¾é‡ã€‚", en: "Secondly, it will promote energy saving and emission reduction, and control the amount of carbon emissions." },
        { id: "bt_5", cn: "ä¸‰ã€æ”¹å–„èƒ½æºç»“æ„ï¼Œå¼€å‘æ–°èƒ½æºå’Œå¯å†ç”Ÿèƒ½æºã€‚", en: "Thirdly, it will improve the energy structure and develop new and renewable energy." },
        { id: "bt_6", cn: "å››ã€æ‰©å¤§æ£®æ—é¢ç§¯ã€‚", en: "Lastly, it will expand forest areas." },
        { id: "bt_7", cn: "æ£®æ—å¯¹äºå¸æ”¶äºŒæ°§åŒ–ç¢³å…·æœ‰é‡è¦æ„ä¹‰ã€‚", en: "Forests are significant for absorbing carbon dioxide." },
        { id: "bt_8", cn: "å…¨çƒæ£®æ—é¢ç§¯æ€»ä½“ä¸Šåœ¨å‡å°‘ï¼Œè€Œä¸­å›½çš„æ£®æ—è¦†ç›–ç‡é€å¹´æœ‰æ‰€æé«˜ã€‚", en: "The global forest area overall is decreasing, while China's forest coverage rate is increasing year by year." },
        { id: "bt_9", cn: "å…¨çƒå˜æš–å¯¹äºç”Ÿæ´»åœ¨åœ°çƒä¸Šçš„æ¯ä¸€ä¸ªè®¤éƒ½ä¼šæœ‰å½±å“ã€‚", en: "Global warming will affect everyone who lives on the Earth." },
        { id: "bt_10", cn: "ä¸­å›½ä½œä¸ºä¸€ä¸ªè´Ÿè´£ä»»çš„å¤§å›½ï¼Œç°åœ¨å’Œå°†æ¥éƒ½ä¼šåšæŒå±¥è¡Œè‡ªå·±åº”è´Ÿçš„è´£ä»»ã€‚", en: "As a responsible major country, China will continue to fulfill its responsibilities at present and in the future." },
        // AI - Updated with full list
        { id: "bt_11", cn: "ä¸­å›½äººå·¥æ™ºèƒ½èµ·æ­¥è¾ƒæ™šã€‚", en: "China is a late starter in artificial intelligence." },
        { id: "bt_12", cn: "ä¸è¿‡ï¼Œæ”¹é©å¼€æ”¾ä»¥æ¥ï¼Œå°¤å…¶æ˜¯è¿‘åå¹´ï¼Œä¸­å›½çš„äººå·¥æ™ºèƒ½å‘å±•è¿…é€Ÿã€‚", en: "However, since the reform and opening up, especially in the recent decade, China's AI has been developing rapidly." },
        { id: "bt_13", cn: "äººå·¥æ™ºèƒ½çš„å‘å±•å·²æˆä¸ºä¸€é¡¹å›½å®¶æˆ˜ç•¥ã€‚", en: "The development of AI has become a national strategy." },
        { id: "bt_14", cn: "æœ‰æ•°åä¸‡è®¡çš„ç§‘å­¦æŠ€æœ¯äººå‘˜å’Œå¤§å­¦å¸ˆç”Ÿä»äº‹äººå·¥æ™ºèƒ½çš„ç ”ç©¶ã€å­¦ä¹ ã€å¼€å‘ä¸åº”ç”¨ã€‚", en: "There are hundreds of thousands of scientific and technical personnel, university teachers and students engaged in the research, learning, development and application of AI." },
        { id: "bt_15", cn: "äº’è”ç½‘å’Œå¤§æ•°æ®æ¨åŠ¨äººå·¥æ™ºèƒ½è¿›å…¥äº†æ–°çš„å‘å±•é˜¶æ®µã€‚", en: "The Internet and big data have pushed AI into a new stage of development." },
        { id: "bt_16", cn: "ä¸­å›½åœ¨äººå·¥æ™ºèƒ½æ–¹é¢å–å¾—äº†çªç ´ã€‚", en: "China has made breakthroughs in AI." },
        { id: "bt_17", cn: "å·²åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ã€è¯­éŸ³è¯†åˆ«ã€å›¾åƒè¯†åˆ«ã€æœºå™¨å­¦ä¹ ã€è™šæ‹Ÿç°å®ã€æ™ºèƒ½é©¾é©¶å’Œæ™ºèƒ½æœºå™¨äººç­‰é¢†åŸŸå–å¾—äº†ä¸€å¤§æ‰¹å…·æœ‰å›½é™…å…ˆè¿›æ°´å¹³çš„åº”ç”¨æˆæœã€‚", en: "It has achieved a large number of internationally advanced application results in fields like natural language processing, speech recognition, image recognition, machine learning, virtual reality, intelligent driving and intelligent robots." },
        // Drone
        { id: "bt_18", cn: "ç›®å‰ï¼Œæ— äººæœºé€è´§åœ¨è®¸å¤šå›½å®¶å—åˆ°é‡è§†ã€‚", en: "At present, drone delivery is valued in many countries." },
        { id: "bt_19", cn: "ç¾å›½å·²ç»æ‰¹å‡†äº†æ— äººæœºç”¨äºå•†ç”¨é€è´§ã€‚", en: "The United States has approved drones for commercial delivery." },
        { id: "bt_20", cn: "ä¸­å›½çš„é˜¿é‡Œå·´å·´ã€äº¬ä¸œå’Œé¡ºä¸°ä¹Ÿå·²å¼€å§‹å°è¯•æ— äººæœºé€è´§ã€‚", en: "China's Alibaba, JD.com and SF Express have also begun experimenting with drone delivery." },
        { id: "bt_21", cn: "ä¸è¿‡ï¼Œæƒ³è¦è¿™ä¸€æœåŠ¡æˆä¸ºå¯èƒ½ï¼Œå¿…é¡»è¦è§£å†³ä¸¤å¤§éš¾é¢˜ã€‚", en: "But to make the service possible, two big problems must be solved." },
        { id: "bt_22", cn: "ä¸€æ˜¯å™ªå£°é—®é¢˜ã€‚æ— äººæœºé£è¡Œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿå™ªå£°ã€‚", en: "One is noise. Drones make noise during flight." },
        { id: "bt_23", cn: "è´§ç‰©è¶Šé‡ï¼Œå°±éœ€è¦æ›´å¤§çš„æ— äººæœºï¼Œæ›´å¤§çš„æ— äººæœºå°±ä¼šäº§ç”Ÿæ›´å¤§çš„å™ªå£°æ±¡æŸ“ã€‚", en: "The heavier the cargo, the greater the need for larger drones, and larger drones will generate more noise pollution." },
        { id: "bt_24", cn: "äºŒæ˜¯éšç§é—®é¢˜ã€‚", en: "The other is privacy." },
        { id: "bt_25", cn: "æ— äººæœºåœ¨é£è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½æ”¶é›†åˆ°å±…æ°‘çš„ä¸ªäººä¿¡æ¯ã€‚", en: "During the flight, drones may collect the residents' personal information." },
        { id: "bt_26", cn: "è¿™äº›ä¿¡æ¯å¯èƒ½è¢«åäººåˆ©ç”¨ï¼Œä»è€Œå¼•å‘å„ç§çŠ¯ç½ªæ´»åŠ¨ã€‚", en: "These information may be used by evil people and trigger various criminal activities." },
        { id: "bt_27", cn: "è¿™ä¸¤å¤§é—®é¢˜æ˜¯æ‰€æœ‰è®¡åˆ’ä½¿ç”¨æ— äººæœºé€è´§æœåŠ¡çš„å…¬å¸äºŸå¾…è§£å†³çš„é—®é¢˜ã€‚", en: "These are two major problems that have to be addressed by all companies planning to use drone delivery services." },
        // Social Media
        { id: "bt_28", cn: "æ®ä¸€é¡¹è°ƒæŸ¥ï¼Œä¸­å›½ç½‘æ°‘æ—¥å‡ä½¿ç”¨ç¤¾äº¤åª’ä½“çš„æ—¶é—´è¶…è¿‡ä¸‰ä¸ªå°æ—¶ã€‚", en: "According to a survey, Chinese netizens use social media for more than three hours per day." },
        { id: "bt_29", cn: "ç¤¾äº¤åª’ä½“æ˜¯å¢åŠ äº†äººä¸äººä¹‹é—´çš„è”ç³»ï¼Œè¿˜æ˜¯æ‹‰å¤§äº†äººä¸äººä¹‹é—´çš„è·ç¦»ï¼Ÿ", en: "Have the social media increased the contact between people or widened their distance?" },
        { id: "bt_30", cn: "è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªå¾ˆéš¾å›ç­”çš„é—®é¢˜ã€‚", en: "That seems to be a tough question to answer." },
        { id: "bt_31", cn: "è¿™äº›å¹³å°ç¡®å®ç¼©çŸ­äº†äººä»¬åœ¨æ—¶é—´ä¸ç©ºé—´ä¸Šçš„è·ç¦»ï¼Œä½†å¿ƒç†çš„è·ç¦»ä¼¼ä¹åœ¨æ‹‰å¤§ã€‚", en: "These platforms do shorten the distance between people in time and space, but their psychological distance seems to be widening." },
        { id: "bt_32", cn: "æœ‰æ—¶ï¼Œäººä»¬å®å¯ä½å¤´ç»™ç¤¾äº¤åª’ä½“é‡Œè¿œæ–¹çš„é™Œç”Ÿäººå‘åæ¡è¯„è®ºï¼Œä¹Ÿä¸æ„¿æ„æŠ¬å¤´ä¸é¢å‰çš„æœ‹å‹æœ‰çœ¼ç¥äº¤æµã€‚", en: "Sometimes people would rather look down and send 10 comments to distant strangers on social media than look up and make eye contact with friends in front of them." },
        { id: "bt_33", cn: "ä»¥å‰ï¼Œäººä»¬æŠŠæœ‹å‹åˆ†ä¸ºä¸¤ç§ï¼šæ·±äº¤å’Œç‚¹å¤´ä¹‹äº¤ã€‚", en: "In the past, people divided friends into two types: close friends and nodding friends." },
        { id: "bt_34", cn: "ç°åœ¨ä¼¼ä¹åˆå¤šäº†ä¸€ç§ï¼Œç§°ä¸ºâ€œç‚¹èµä¹‹äº¤â€ã€‚", en: "Now there seems to be another kind of friends called 'thumbs-up friends.'" },
        { id: "bt_35", cn: "ä½†æ˜¯ï¼Œåœ¨ç¤¾äº¤åª’ä½“ä¸Šæ³›æ»¥çš„â€œç‚¹èµâ€é‡Œï¼Œèƒ½æœ‰å¤šå°‘çœŸæŒšçš„å‹æƒ…å‘¢ï¼Ÿ", en: "But how much genuine friendship can there be in the 'likes' that flood the social media?" }
    ];

    // 2. é‡‘å¥åº“ (Gold Trans) - è¡¥å…¨è‡³38æ¡
    const goldTransDB = [
        { id: "gt_1", cn: "é“­è®°å†å²", en: "Remember history" }, { id: "gt_2", cn: "ç¼…æ€€å…ˆçƒˆ", en: "Honor the fallen" },
        { id: "gt_3", cn: "ççˆ±å’Œå¹³", en: "Cherish peace" }, { id: "gt_4", cn: "å¼€åˆ›æœªæ¥", en: "Open up the future" },
        { id: "gt_5", cn: "æŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿", en: "National united front against Japanese aggression" },
        { id: "gt_6", cn: "äººç±»å‘½è¿ä¼‘æˆšä¸å…±", en: "Humanity shares a common destiny" },
        { id: "gt_7", cn: "å®ˆæœ›ç›¸åŠ©", en: "Support one another" }, { id: "gt_8", cn: "ç»´æŠ¤å…±åŒå®‰å…¨", en: "Safeguard common security" },
        { id: "gt_9", cn: "æ¶ˆå¼­æˆ˜äº‰æ ¹æº", en: "Eliminate the root cause of war" }, { id: "gt_10", cn: "å¯¹è¯è¿˜æ˜¯å¯¹æŠ—", en: "Dialogue or confrontation" },
        { id: "gt_11", cn: "å…±èµ¢è¿˜æ˜¯é›¶å’Œ", en: "Win-win outcomes or zero-sum games" }, { id: "gt_12", cn: "ç¥åœ£èŒè´£", en: "Sacred duties" },
        { id: "gt_13", cn: "ä¸–ç•Œä¸€æµå†›é˜Ÿ", en: "World-class forces" }, { id: "gt_14", cn: "å›½å®¶ä¸»æƒ", en: "National sovereignty" },
        { id: "gt_15", cn: "é¢†åœŸå®Œæ•´", en: "Territorial integrity" }, { id: "gt_16", cn: "ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´", en: "The great rejuvenation of the Chinese nation" },
        { id: "gt_17", cn: "è¡€è‚‰ä¹‹èº¯ç­‘é•¿åŸ", en: "Building a great wall with their flesh and blood" },
        { id: "gt_18", cn: "åæŠ—å¤–æ•Œå…¥ä¾µ", en: "Against foreign aggression" }, { id: "gt_19", cn: "æ‹¯æ•‘äººç±»æ–‡æ˜", en: "The salvation of human civilization" },
        { id: "gt_20", cn: "æ„å»ºäººç±»å‘½è¿å…±åŒä½“", en: "Build a community with a shared future for humanity" },
        { id: "gt_21", cn: "è¸”å‰å¥‹å‘ã€å‹‡æ¯…å‰è¡Œ", en: "Forge ahead with determination and courage" },
        { id: "gt_22", cn: "ä¸­å›½å¼ç°ä»£åŒ–", en: "Chinese modernization" }, { id: "gt_23", cn: "å¼ºå›½å»ºè®¾", en: "Build a strong country" },
        { id: "gt_24", cn: "æ°‘æ—å¤å…´", en: "National rejuvenation" },
        { id: "gt_25", cn: "æˆ˜ç•¥æ”¯æ’‘", en: "Strategic support" }, { id: "gt_26", cn: "å·¨å¤§çš„æ°‘æ—ç‰ºç‰²", en: "Immense national sacrifice" },
        { id: "gt_27", cn: "ä¿å«ä¸–ç•Œå’Œå¹³", en: "The defense of world peace" }, { id: "gt_28", cn: "å’Œå¹³å‘å±•é“è·¯", en: "The path of peaceful development" },
        { id: "gt_29", cn: "ä¸­å›½äººæ°‘è§£æ”¾å†›", en: "The Chinese People's Liberation Army (PLA)" }, { id: "gt_30", cn: "ä¸–ç•Œå’Œå¹³ä¸å‘å±•", en: "World peace and development" },
        { id: "gt_31", cn: "æ–°æ—¶ä»£æ–°å¾ç¨‹", en: "New journey in the new era" }, { id: "gt_32", cn: "ä¸­å›½å…±äº§å…š", en: "The Communist Party of China (CPC)" },
        { id: "gt_33", cn: "ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯", en: "The path of socialism with Chinese characteristics" }, { id: "gt_34", cn: "ä¼Ÿå¤§æŠ—æˆ˜ç²¾ç¥", en: "The great spirit of the War of Resistance" },
        { id: "gt_35", cn: "ä¸œæ–¹ä¸»æˆ˜åœº", en: "The main eastern theater" }, { id: "gt_36", cn: "ä¸­å›½äººæ°‘æŠ—æ—¥æˆ˜äº‰", en: "Chinese People's War of Resistance against Japanese Aggression" },
        { id: "gt_37", cn: "ä¸–ç•Œåæ³•è¥¿æ–¯æˆ˜äº‰", en: "World Anti-Fascist War" }, { id: "gt_38", cn: "é˜…å…µé‡è¦è®²è¯é‡‘å¥", en: "Key quotes from the parade speech" }
    ];

    // 3. å…¨é‡é¢˜åº“ (Quiz) - æå–è‡ªç¬¬ä¸€é¢˜æ–‡æ¡£
    const quizDB = [
        // Page 16
        { id: "p16_1", q: "A large quantity of real cases suggest that the average speed of the vehicles ______ closely with the severity of the accident caused.", a: "correlates", options: ["refund", "correlates", "inherit", "proclaim"], expl: "correlate with: ä¸...ç›¸å…³" },
        { id: "p16_2", q: "In schools, teachers and pupils alike often ______ that if a concept has been easy to learn, then the lesson has been successful.", a: "assume", options: ["assume", "range", "rig", "inherit"], expl: "assume: å‡è®¾ï¼Œè®¤ä¸º" },
        { id: "p16_3", q: "The company's new president will have to ______ some complicated legal problems from his predecessor.", a: "inherit", options: ["inherit", "innovate", "prestige", "range"], expl: "inherit: ç»§æ‰¿" },
        { id: "p16_4", q: "Every year, 1.25 million people die in traffic accidents around the world, which is ______ to the entire population of China's Lijiang City.", a: "equivalent", options: ["revolutionize", "equivalent", "assume", "rig"], expl: "equivalent to: ç›¸å½“äº" },
        { id: "p16_5", q: "What is fundamental to a company's survival is to ______ and always go a few steps ahead in the industry.", a: "innovate", options: ["innovate", "refund", "whereas", "proclaim"], expl: "innovate: åˆ›æ–°" },
        { id: "p16_6", q: "All the member countries at the conference have signed a treaty to ______ their loyalty to the alliance.", a: "proclaim", options: ["proclaim", "correlate", "prestige", "assume"], expl: "proclaim: å®£ç¤ºï¼Œå®£å‘Š" },
        { id: "p16_7", q: "Huawei, a Chinese technology company... enjoys high ______ both locally and internationally.", a: "prestige", options: ["range", "prestige", "inherit", "revolutionize"], expl: "prestige: å£°æœ›" },
        { id: "p16_8", q: "The railway company claimed that they would ______ 20 percent of a fare if their train is more than an hour late.", a: "refund", options: ["refund", "whereas", "equivalent", "correlate"], expl: "refund: é€€æ¬¾" },
        { id: "p16_9", q: "Lu Xun produced many long-lasting short stories, the themes of which cover an extensive ______ and reflect a multitude of aspects of social life.", a: "range", options: ["rig", "range", "innovate", "inherit"], expl: "range: èŒƒå›´" },
        { id: "p16_10", q: "Agricultural technologies have ______ farm production, resulting in a dramatic increase in grain output.", a: "revolutionized", options: ["revolutionized", "proclaim", "prestige", "assume"], expl: "revolutionize: ä½¿...å‘ç”Ÿé©å‘½æ€§å˜åŒ–" },
        { id: "p16_11", q: "He was sentenced to ten years' imprisonment for ______ the stock market and making huge profits illegally.", a: "rigging", options: ["rigging", "refund", "range", "whereas"], expl: "rig: æ“çºµï¼ˆå¸‚åœºï¼‰" },
        { id: "p16_12", q: "The city spent over $1 billion on its museums and stadiums, ______ it failed to look after its schools.", a: "whereas", options: ["whereas", "equivalent", "correlate", "innovate"], expl: "whereas: ç„¶è€Œ" },
        // Page 17
        { id: "p17_1", q: "If someone tries to persuade you to invest in a project that is least likely to pay off, you might as well ______ it.", a: "close your ears to", options: ["close your ears to", "point out", "fill out", "result in"], expl: "close ears to: å……è€³ä¸é—»" },
        { id: "p17_2", q: "All doctoral students are expected to hand in their thesis abstracts before Friday, so don't ______ details for the time being.", a: "sweat over", options: ["sweat over", "tend to", "in the first place", "behind the times"], expl: "sweat over: ç„¦è™‘ï¼Œè¾›è‹¦å¤„ç†" },
        { id: "p17_3", q: "It will take some time for the applicants to ______ the forms for overseas study programs.", a: "fill out", options: ["fill out", "point out", "close one's ears to", "result in"], expl: "fill out: å¡«å†™" },
        { id: "p17_4", q: "People in rural or underserved urban areas tend to be much ______ when it comes to the latest computing technology.", a: "behind the times", options: ["behind the times", "in the first place", "sweat over", "tend to"], expl: "behind the times: è½åäºæ—¶ä»£" },
        { id: "p17_5", q: "He couldn't find the application form; probably he had not even been given one ______.", a: "in the first place", options: ["in the first place", "result in", "fill out", "point out"], expl: "in the first place: èµ·åˆ" },
        { id: "p17_6", q: "The fall in the value of the Japanese yen might ______ a very slight increase in interest rates.", a: "result in", options: ["result in", "tend to", "close one's ears to", "sweat over"], expl: "result in: å¯¼è‡´" },
        // Page 52 (MCQ)
        { id: "p52_1", q: "Officials claim that the chemical leak accident **poses** no real danger for surrounding residents.", a: "presents", options: ["presents", "alarms", "boosts"], expl: "pose danger = present danger" },
        { id: "p52_2", q: "These arguments were **valid** a hundred years ago and they still hold true today.", a: "justifiable", options: ["valuable", "flawless", "justifiable"], expl: "valid = justifiable" },
        { id: "p52_3", q: "There are rules to prohibit emission of poisonous waste, yet some factories **disregard** them for the sake of costs.", a: "ignore", options: ["innovate", "correlate", "ignore"], expl: "disregard = ignore" },
        { id: "p52_4", q: "His **interpretation** of the theory was not accurate or objective.", a: "explanation", options: ["explanation", "revolution", "completion"], expl: "interpretation = explanation" },
        { id: "p52_5", q: "It is well **documented** that women generally have a longer life span than men.", a: "proven with facts", options: ["proven with facts", "imposed with orders", "announced with authority"], expl: "documented = proven with facts" },
        { id: "p52_6", q: "The attorney's arguments are valid since he has collected enough **proof** concerning the case.", a: "evidence", options: ["assurance", "promotion", "evidence"], expl: "proof = evidence" },
        { id: "p52_7", q: "We hope that our research will have an **impact** on the environment, especially the air quality in cities.", a: "influence", options: ["initiative", "influence", "analysis"], expl: "impact = influence" },
        { id: "p52_8", q: "The system is so sensitive that it can **detect** changes in temperature as small as 0.003 degrees.", a: "identify", options: ["identify", "inherit", "convert"], expl: "detect = identify" },
        { id: "p52_9", q: "The president said curbing the addiction of alcohol would save money and **prolong** lives.", a: "extend", options: ["persist", "delay", "extend"], expl: "prolong = extend" },
        { id: "p52_10", q: "We still have no **conclusive** proof that climate change is caused solely by human activity.", a: "decisive", options: ["decisive", "dominant", "apparent"], expl: "conclusive = decisive" },
        { id: "p52_11", q: "The research team has been **tracking** atmospheric temperatures in the region for two decades.", a: "following", options: ["generating", "following", "spinning"], expl: "tracking = following" },
        { id: "p52_12", q: "Concentration is **defined** as the process of centering one's attention over a period of time.", a: "explained", options: ["outlined", "distinguished", "explained"], expl: "defined = explained" },
        { id: "p52_13", q: "There is still no general **consensus** on whether global warming is real or not.", a: "agreement", options: ["agreement", "conclusion", "definition"], expl: "consensus = agreement" },
        { id: "p52_14", q: "Environmentalists **advocate** that all vehicles keep to exhaust emission standard.", a: "support", options: ["support", "determine", "indicate"], expl: "advocate = support" },
        { id: "p52_15", q: "It is important to **maintain** a constant temperature inside the greenhouse.", a: "keep", options: ["keep", "contain", "restrict"], expl: "maintain = keep" },
        // Page 53
        { id: "p53_1", q: "This is partially attributed ______ the melting of ice caps.", a: "to", options: ["to", "with", "from", "on"], expl: "attribute ... to" },
        { id: "p53_2", q: "Sea levels have doubled compared ______ the 20th century trend.", a: "with", options: ["with", "to", "in", "at"], expl: "compared with" },
        { id: "p53_3", q: "The rise ... has resulted ______ greenhouse gases.", a: "from", options: ["from", "in", "to", "on"], expl: "result from" },
        { id: "p53_4", q: "The glaciers are decreasing in size due ______ reduction in gases.", a: "to", options: ["to", "from", "with", "by"], expl: "due to" },
        { id: "p53_5", q: "... those in favor ______ proving its existence ...", a: "of", options: ["of", "in", "on", "to"], expl: "in favor of" },
        { id: "p53_6", q: "These scientists hold ______ a strict definition ...", a: "to", options: ["to", "on", "with", "at"], expl: "hold to" },
        { id: "p53_7", q: "But, ______ the contrary Arctic ice is up ...", a: "on", options: ["on", "in", "to", "of"], expl: "on the contrary" },
        { id: "p53_8", q: "The ... problem lies ______ the two groups using different definitions.", a: "in", options: ["in", "on", "at", "to"], expl: "lie in" },
        { id: "p53_9", q: "... it is more reflective ______ the real issue.", a: "of", options: ["of", "to", "in", "with"], expl: "reflective of" },
        { id: "p53_10", q: "Contrary ______ public belief ...", a: "to", options: ["to", "with", "from", "on"], expl: "contrary to" },
        // Page 87 (Address)
        { id: "p87_1", q: "This book discusses these concerns and useful approaches to **address** them.", a: "deal with a problem", options: ["make a speech", "direct words to someone", "deal with a problem"], expl: "address: å¤„ç†" },
        { id: "p87_2", q: "You will have to **address** your comments to our Head Office.", a: "direct words to someone", options: ["make a speech", "direct words to someone", "deal with a problem"], expl: "address: è‡´å‡½" },
        { id: "p87_3", q: "The minister **addressed** a group of senior citizens concerning healthcare reform.", a: "make a speech", options: ["make a speech", "direct words to someone", "deal with a problem"], expl: "address: æ¼”è®²" },
        // Page 89 (Phrases)
        { id: "p89_1", q: "It is an army man's duty to ______ orders strictly during a military operation.", a: "act on", options: ["act on", "be rid of", "aside from", "brush aside"], expl: "act on: å¥‰è¡Œ" },
        { id: "p89_2", q: "If you have ______ all the exercises in this book, you are ready for the advanced course.", a: "followed through", options: ["followed through", "build up", "cope with", "reach out"], expl: "follow through: å®Œæˆ" },
        { id: "p89_3", q: "The government programs are intended to ______ poverty throughout the country.", a: "be rid of", options: ["be rid of", "be aware of", "act on", "struggle with"], expl: "be rid of: æ‘†è„±" },
        { id: "p89_4", q: "Talk to someone... Don't let your depression ______.", a: "build up", options: ["build up", "brush aside", "cope with", "follow through"], expl: "build up: ç§¯èš" },
        { id: "p89_5", q: "An alarming number of physicians are unable to ______ the pressure of practicing everyday medicine.", a: "cope with", options: ["cope with", "reach out", "aside from", "be rid of"], expl: "cope with: åº”å¯¹" },
        { id: "p89_6", q: "It would do good if scholars could ______ and exchange ideas with their counterparts.", a: "reach out", options: ["reach out", "act on", "follow through", "build up"], expl: "reach out: äº¤æµ" },
        { id: "p89_7", q: "Money remains to be a problem, but ______ that the plan is progressing nicely.", a: "aside from", options: ["aside from", "be aware of", "struggle with", "brush aside"], expl: "aside from: é™¤äº†" },
        { id: "p89_8", q: "The company denied the rumors and ______ reports that it was on the verge of bankruptcy.", a: "brushed aside", options: ["brushed aside", "act on", "reach out", "cope with"], expl: "brush aside: æ¼ è§†" },
        // Page 128 (Word Choice)
        { id: "p128_1", q: "The company... has now ______ into a high-prestige enterprise that covers many domains.", a: "evolved", options: ["evolved", "displace", "bias", "foster"], expl: "evolve: è¿›åŒ–" },
        { id: "p128_2", q: "For decades, the U.S. led the world... but in recent years it has been ______ by other countries.", a: "surpassed", options: ["surpassed", "manipulation", "multiply", "strategic"], expl: "surpass: è¶…è¿‡" },
        { id: "p128_3", q: "After 30 years' living in Guangzhou, Elizabeth has been ______ into the local culture.", a: "assimilated", options: ["assimilated", "automatically", "proof", "minimize"], expl: "assimilate: åŒåŒ–" },
        { id: "p128_4", q: "The lawyer's arguments are well grounded because he has collected enough ______ concerning the case.", a: "proof", options: ["proof", "domain", "displace", "evolve"], expl: "proof: è¯æ®" },
        { id: "p128_5", q: "It is proved that playing sports can ______ the social development of young people.", a: "foster", options: ["foster", "bias", "manipulation", "multiply"], expl: "foster: åŸ¹å…»" },
        { id: "p128_6", q: "Big-name employers... have a(n) ______ in favor of recruiting graduates from prestigious universities.", a: "bias", options: ["bias", "strategic", "automatically", "minimize"], expl: "bias: åè§" },
        { id: "p128_7", q: "There has been so much media ______ of the facts that nobody knows the truth of the issue.", a: "manipulation", options: ["manipulation", "displace", "assimilate", "domain"], expl: "manipulation: æ“çºµ" },
        { id: "p128_8", q: "The executives believed that combining the two work teams would ______ their strength by several times.", a: "multiply", options: ["multiply", "evolve", "proof", "surpass"], expl: "multiply: æˆå€å¢åŠ " },
        { id: "p128_9", q: "It is the company's ______ decision to sell part of its business to focus on its core products.", a: "strategic", options: ["strategic", "foster", "bias", "automatically"], expl: "strategic: æˆ˜ç•¥æ€§çš„" },
        { id: "p128_10", q: "If the air pressure in aircraft cabin becomes lower, oxygen masks will ______ drop down.", a: "automatically", options: ["automatically", "manipulation", "minimize", "displace"], expl: "automatically: è‡ªåŠ¨åœ°" },
        { id: "p128_11", q: "These top-secret documents should never have been released into the public ______.", a: "domain", options: ["domain", "assimilate", "evolve", "multiply"], expl: "public domain: å…¬å…±é¢†åŸŸ" },
        { id: "p128_12", q: "Environmentalists are doing everything... to ______ the impact of the oil spill.", a: "minimize", options: ["minimize", "surpass", "proof", "strategic"], expl: "minimize: æœ€å°åŒ–" },
        { id: "p128_13", q: "Some manual labor is bound to be ______ by artificial intelligence.", a: "displaced", options: ["displaced", "foster", "bias", "manipulation"], expl: "displace: å–ä»£" },
        // Page 129
        { id: "p129_1", q: "He built up a successful business... but it was all done ______ his health.", a: "at the expense of", options: ["at the expense of", "be bound to", "queue up", "take in"], expl: "at the expense of: ä»¥...ä¸ºä»£ä»·" },
        { id: "p129_2", q: "The company's stock has declined... ______ last year when it gained 30 percent.", a: "in contrast with", options: ["in contrast with", "a metaphor for", "commit", "be well placed to"], expl: "in contrast with: ä¸...å½¢æˆå¯¹æ¯”" },
        { id: "p129_3", q: "When you have to cope with so many issues at the same time, mistakes ______ happen.", a: "are bound to", options: ["are bound to", "at the expense of", "in terms of", "queue up"], expl: "be bound to: æ³¨å®š" },
        { id: "p129_4", q: "The increasing number of solitary persons... is ______ the lack of communication in the modern world.", a: "a metaphor for", options: ["a metaphor for", "in contrast with", "take in", "be well placed to"], expl: "metaphor: éšå–»" },
        { id: "p129_5", q: "In preparation for the scrabble competition, students are... trying to ______ the words to memory.", a: "commit", options: ["commit", "queue up", "be bound to", "at the expense of"], expl: "commit to memory: è®°ä½" },
        { id: "p129_6", q: "Leslie, still bothered by her unfinished work, was not ______ anything.", a: "taking in", options: ["taking in", "a metaphor for", "in contrast with", "in terms of"], expl: "take in: ç†è§£" },
        { id: "p129_7", q: "For the sake of security, visitors will have to ______ to pass through metal detectors.", a: "queue up", options: ["queue up", "be well placed to", "commit", "take in"], expl: "queue up: æ’é˜Ÿ" },
        { id: "p129_8", q: "The executives believe that the Group ______ manage its business despite the uncertain economic environment.", a: "is well placed to", options: ["is well placed to", "be bound to", "a metaphor for", "in contrast with"], expl: "be well placed to: å¤„å¢ƒä¼˜è¶Š" },
        // Page 169
        { id: "p169_1", q: "Farming technology enables the crops to be ______ by liquid fertilizer.", a: "nourished", options: ["nourished", "biased", "regime", "preach"], expl: "nourish: æ»‹å…»" },
        { id: "p169_2", q: "Although she once ______ freedom and independence, she now gives up her career.", a: "preached", options: ["preached", "processed", "variable", "duration"], expl: "preach: å®£æ‰¬" },
        { id: "p169_3", q: "The common nutrition advice usually includes... 'eat less ______ food and choose fresh food instead.'", a: "processed", options: ["processed", "prevail", "mirror", "definite"], expl: "processed food: åŠ å·¥é£Ÿå“" },
        { id: "p169_4", q: "These workshops, usually of a couple of days' ______, bring scholars and administers together.", a: "duration", options: ["duration", "biased", "nourished", "regime"], expl: "duration: æŒç»­æ—¶é—´" },
        { id: "p169_5", q: "His account of the situation was very ______ and you should check facts before making a judgment.", a: "biased", options: ["biased", "preach", "variable", "prevail"], expl: "biased: æœ‰åè§çš„" },
        { id: "p169_6", q: "Despite low interest rates, the concept of depositing money in the bank still ______ among the vast majority of people.", a: "prevails", options: ["prevails", "processed", "mirror", "definite"], expl: "prevail: ç››è¡Œ" },
        { id: "p169_7", q: "The sales of healthcare products have been increasing... which ______ the public's pursuit of health.", a: "mirrors", options: ["mirrors", "duration", "nourished", "preach"], expl: "mirror: åæ˜ " },
        { id: "p169_8", q: "Some people are anxious to try various health ______, but never stick to any of them.", a: "regimes", options: ["regimes", "biased", "processed", "variable"], expl: "regime: ç–—æ³•/åˆ¶åº¦" },
        { id: "p169_9", q: "We have some statistics, but we really need something more ______ before we can make any firm decisions.", a: "definite", options: ["definite", "prevail", "mirror", "duration"], expl: "definite: ç¡®å®šçš„" },
        { id: "p169_10", q: "A study of hundreds of elderly people shows that some have similar lifestyles, but ______ in health conditions.", a: "variable", options: ["variable", "nourished", "regime", "preach"], expl: "variable: å¤šå˜çš„" },
        // Page 170
        { id: "p170_1", q: "The doctor cautions that this drug may have the effect of ______ the patients' heart rate.", a: "speeding up", options: ["speeding up", "on average", "make up", "that said"], expl: "speed up: åŠ é€Ÿ" },
        { id: "p170_2", q: "______ people who consciously control their diet are healthier than those overeating.", a: "On average", options: ["On average", "take a leaf from sb.'s book", "one size fits all", "as well as"], expl: "on average: å¹³å‡è€Œè¨€" },
        { id: "p170_3", q: "As a result, the method of ______ means convenience for policy makers, but not practical to local needs.", a: "one size fits all", options: ["one size fits all", "speed up", "make up", "on average"], expl: "one size fits all: ä¸€åˆ€åˆ‡" },
        { id: "p170_4", q: "He is studying like crazy to ______ the lessons he missed during his stay in the hospital.", a: "make up", options: ["make up", "that said", "as well as", "take a leaf from sb.'s book"], expl: "make up: è¡¥ä¸Š" },
        { id: "p170_5", q: "When you are in a leadership position, many people will ______, whether intentionally or not.", a: "take a leaf from your book", options: ["take a leaf from your book", "speed up", "one size fits all", "make up"], expl: "take a leaf from one's book: æ•ˆä»¿æŸäºº" },
        // Page 243
        { id: "p243_1", q: "The meeting is open to everyone, whatever their religious **orientation**.", a: "This overseas company employs people without regard to their political orientation.", options: ["The department has arranged an orientation session...", "This overseas company employs people without regard to their political orientation.", "The company needs to develop a stronger orientation towards marketing..."], expl: "orientation: å€¾å‘/ä¿¡ä»°" },
        { id: "p243_2", q: "The **likes**, comments and posts we share on social media connect us to the world.", a: "My new profile picture got more than 100 likes on WeChat Moments.", options: ["Boxing hasn't seen the likes of Muhammad Ali since he retired.", "There's a big sports hall for tennis and badminton and such like.", "My new profile picture got more than 100 likes on WeChat Moments."], expl: "like: ç‚¹èµ" },
        { id: "p243_4", q: "Dylan's latest record is a **conscious** attempt to break away from his old image.", a: "Julia made a conscious effort to appear unconcerned...", options: ["Julia made a conscious effort to appear unconcerned...", "She was very conscious of being the only one without a degree.", "She was fully conscious throughout the surgery..."], expl: "conscious: æœ‰æ„çš„" },
        { id: "p243_5", q: "She frequently **exploits** her authority by getting other people to do things for her.", a: "Many employers are only too ready to exploit and underpay female workers.", options: ["The country's natural resources have not yet been fully exploited.", "She said the tragedy had been exploited by the media...", "Many employers are only too ready to exploit and underpay female workers."], expl: "exploit: å‰¥å‰Š/æ»¥ç”¨" },
        // Page 289
        { id: "p289_1", q: "Some soldiers are still ______ by war memories and by images of violence.", a: "haunted", options: ["haunted", "impose", "suspension", "repression"], expl: "haunt: è¦ç»•/å›°æ‰°" },
        { id: "p289_2", q: "The team could barely ______ their disappointment when the result of the robot contest was announced.", a: "conceal", options: ["conceal", "suspension", "reflection", "impose"], expl: "conceal: æ©é¥°" },
        { id: "p289_3", q: "While his company was under investigation... some partners ______ to deny any involvement with his business.", a: "hastened", options: ["hastened", "haunt", "reflection", "repression"], expl: "hasten: æ€¥å¿™" },
        { id: "p289_4", q: "There have been calls for the drug's immediate ______, following reports that it has dangerous side effects.", a: "suspension", options: ["strive", "repression", "persistence", "suspension"], expl: "suspension: æš‚åœ" },
        { id: "p289_5", q: "The manager originally had discounted the initiative, but after much ______ he agreed to see how it would fare.", a: "reflection", options: ["procession", "repression", "reflection", "hasten"], expl: "reflection: æ·±æ€" },
        { id: "p289_6", q: "Multiple experiments have demonstrated that the ______ of anger can be detrimental to both physical and mental health.", a: "repression", options: ["repression", "hasten", "strive", "conceal"], expl: "repression: å‹æŠ‘" },
        { id: "p289_7", q: "Generations of Chinese astronomers have been working hard, ______ for a greater understanding of the processes that occur inside stars.", a: "striving", options: ["reflection", "striving", "suspension", "persistence"], expl: "strive: å¥‹æ–—" },
        { id: "p289_8", q: "After a(n) ______ of product quality accidents, the food company now has very low prestige among consumers.", a: "procession", options: ["procession", "repression", "suspension", "persistence"], expl: "procession: ä¸€è¿ä¸²" },
        { id: "p289_9", q: "He said his achievements were partially attributed to his quiet ______, especially in hard times.", a: "persistence", options: ["persistence", "haunt", "impose", "conceal"], expl: "persistence: åšæŒ" },
        { id: "p289_10", q: "Parents are usually inclined to ______ their own moral values on their children.", a: "impose", options: ["strive", "reflection", "impose", "conceal"], expl: "impose on: å¼ºåŠ " },
        { id: "p289_e1", q: "After being informed of winning the lottery, his imagination was ______, thinking of all the ways he could spend the money.", a: "running riot", options: ["running riot", "count for", "beat back", "drink in"], expl: "run riot: å¥”æ”¾" },
        { id: "p289_e2", q: "At first, she had concerns about telling the truth, but ______, she opened up and disclosed the secret.", a: "at length", options: ["at length", "under one's breath", "spend itself", "run riot"], expl: "at length: ç»ˆäº" },
        { id: "p289_e3", q: "The former president was reluctant to admit the fact that his influence had ______ less ever since he resigned.", a: "counted for", options: ["counted for", "drink in", "beat back", "under one's breath"], expl: "count for: æœ‰ä»·å€¼" },
        { id: "p289_e4", q: "Hearing the good news, he muttered ______ 'Thank God!' and felt greatly relieved.", a: "under his breath", options: ["under his breath", "run riot", "at length", "count for"], expl: "under one's breath: ä½å£°åœ°" },
        { id: "p289_e5", q: "After days of boring finger practice, the little boy's initial surge of interest in playing the piano ______ at length.", a: "spent itself", options: ["spent itself", "beat back", "drink in", "run riot"], expl: "spend itself: è€—å°½" },
        { id: "p289_e6", q: "The hot dry weather with strong wind prevented firemen from ______ the wildfire within short time.", a: "beating back", options: ["beating back", "count for", "spend itself", "at length"], expl: "beat back: å‡»é€€" },
        { id: "p289_e7", q: "For a moment she just sat there, enjoying the beautiful scene and ______ the fond memories of childhood.", a: "drinking in", options: ["drinking in", "under one's breath", "run riot", "spend itself"], expl: "drink in: é™¶é†‰äº" }
    ];

    // ================= æ ¸å¿ƒé€»è¾‘ =================
    const KEY_STATS = 'eng_v7_final_stats';
    let stats = { big: {}, gold: {}, quiz: {} };

    window.onload = function() {
        try {
            const saved = localStorage.getItem(KEY_STATS);
            if (saved) stats = JSON.parse(saved);
            
            // åˆå§‹åŒ–è®°å¿†ç‚¹æ•°
            bigTransDB.forEach(i => { if(!stats.big[i.id]) stats.big[i.id] = 10; });
            goldTransDB.forEach(i => { if(!stats.gold[i.id]) stats.gold[i.id] = 10; });
            quizDB.forEach(i => { if(!stats.quiz[i.id]) stats.quiz[i.id] = 0; });

            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('app-content').style.display = 'block';

            renderBigTrans();
            renderGoldTrans();
            renderQuiz();
            renderMistakes();
        } catch (e) {
            console.error(e);
            hardReset();
        }
    };

    function saveStats() {
        localStorage.setItem(KEY_STATS, JSON.stringify(stats));
        renderMistakes();
    }

    function switchTab(id, btn) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
    }

    function showToast(msg, type) {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.innerHTML = type === 'success' ? `âœ… ${msg}` : `ğŸ§  ${msg}`;
        container.appendChild(toast);
        setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 300); }, 2000);
    }

    // --- 1. é•¿éš¾å¥ (5å¥/ç»„) ---
    function renderBigTrans() {
        const listDiv = document.getElementById('bigTrans-list');
        listDiv.innerHTML = '';
        let list = bigTransDB.map(i => ({...i, w: stats.big[i.id] + Math.random()*5}));
        list.sort((a,b) => b.w - a.w);
        
        list.slice(0, 5).forEach((item, idx) => {
            const div = document.createElement('div');
            div.className = 'trans-card anim-item';
            div.style.animationDelay = `${idx * 0.05}s`;
            div.innerHTML = `
                <div class="mp-badge" id="badge-big-${item.id}">ç‚¹æ•°: ${Math.floor(stats.big[item.id])}</div>
                <div class="cn-text">${item.cn}</div>
                <button class="btn btn-reveal" onclick="this.nextElementSibling.style.display='block';this.style.display='none'">ğŸ‘€ æŸ¥çœ‹è‹±æ–‡</button>
                <div class="en-box">
                    <div class="en-text">${item.en}</div>
                    <div style="margin-top:15px; display:flex; justify-content:flex-end; gap:10px;">
                        <button class="btn btn-no" onclick="updateW('big', '${item.id}', 5)">âŒ ä¸ä¼š</button>
                        <button class="btn btn-yes" onclick="updateW('big', '${item.id}', -2)">âœ… ä¼šäº†</button>
                    </div>
                </div>
            `;
            listDiv.appendChild(div);
        });
    }

    // --- 2. é‡‘å¥ (15å¥/ç»„) ---
    function renderGoldTrans() {
        const listDiv = document.getElementById('goldTrans-list');
        listDiv.innerHTML = '';
        let list = goldTransDB.map(i => ({...i, w: stats.gold[i.id] + Math.random()*5}));
        list.sort((a,b) => b.w - a.w);
        
        list.slice(0, 15).forEach((item, idx) => {
            const container = document.createElement('div');
            container.className = 'flashcard-container anim-item';
            container.style.animationDelay = `${idx * 0.03}s`;
            container.innerHTML = `
                <div class="flashcard-inner">
                    <div class="flash-front"><div>${item.cn}</div><div style="font-size:12px;color:#aaa;">(ç‚¹å‡»ç¿»è½¬)</div></div>
                    <div class="flash-back">
                        <div class="mp-badge" id="badge-gold-${item.id}" style="top:5px;right:5px;">${Math.floor(stats.gold[item.id])}</div>
                        <div class="flash-en-text">${item.en}</div>
                        <div class="flash-btns">
                            <button class="btn btn-no" onclick="event.stopPropagation();updateW('gold','${item.id}',5)">âŒ</button>
                            <button class="btn btn-yes" onclick="event.stopPropagation();updateW('gold','${item.id}',-2)">âœ…</button>
                        </div>
                    </div>
                </div>
            `;
            container.onclick = function() { this.classList.toggle('flipped'); };
            listDiv.appendChild(container);
        });
    }

    // --- 3. é€‰æ‹©é¢˜ (10é¢˜/ç»„) ---
    function renderQuiz() {
        const listDiv = document.getElementById('quiz-list');
        listDiv.innerHTML = '';
        let list = quizDB.map(i => ({...i, w: (stats.quiz[i.id]*10) + Math.random()}));
        list.sort((a,b) => b.w - a.w);
        
        list.slice(0, 10).forEach((item, idx) => {
            let opts = [...item.options].sort(() => 0.5 - Math.random());
            let optsHtml = opts.map(o => `<div class="opt-btn" onclick="checkQuiz(this,'${item.id}','${o.replace(/'/g,"\\'")}', '${item.a.replace(/'/g,"\\'")}', 'fb-${idx}')">${o}</div>`).join('');
            
            const div = document.createElement('div');
            div.className = 'quiz-card anim-item';
            div.style.animationDelay = `${idx * 0.05}s`;
            div.innerHTML = `
                <div class="q-text">${idx+1}. ${item.q.replace('______', '______')}</div>
                <div class="opt-grid">${optsHtml}</div>
                <div id="fb-${idx}" class="quiz-feedback"><strong>è§£æï¼š</strong>${item.expl}<br><strong>ç­”æ¡ˆï¼š</strong>${item.a}</div>
            `;
            listDiv.appendChild(div);
        });
    }

    function checkQuiz(el, id, uVal, cVal, fbId) {
        if(el.parentElement.classList.contains('done')) return;
        el.parentElement.classList.add('done');
        const fbDiv = document.getElementById(fbId);
        fbDiv.style.display = 'block';
        
        if(uVal === cVal) {
            el.classList.add('correct');
            if(stats.quiz[id] > 0) stats.quiz[id]--;
            showToast("å›ç­”æ­£ç¡®ï¼", "success");
        } else {
            el.classList.add('wrong');
            stats.quiz[id]++;
            showToast("å›ç­”é”™è¯¯", "error");
            Array.from(el.parentElement.children).forEach(c => {
                if(c.innerText.trim() === cVal) c.classList.add('correct');
            });
        }
        saveStats();
    }

    function updateW(type, id, change) {
        stats[type][id] = Math.max(0, stats[type][id] + change);
        saveStats();
        const badge = document.getElementById(`badge-${type}-${id}`);
        if(badge) badge.innerText = type==='gold' ? `${Math.floor(stats[type][id])}` : `ç‚¹æ•°: ${Math.floor(stats[type][id])}`;
        showToast(change > 0 ? "è®°å¿†ç‚¹æ•° +5" : "è®°å¿†ç‚¹æ•° -2", change>0?'error':'success');
    }

    // --- é”™é¢˜æœ¬ ---
    function renderMistakes() {
        const div = document.getElementById('mistake-list');
        let h1 = bigTransDB.filter(i => stats.big[i.id] > 12);
        let h2 = goldTransDB.filter(i => stats.gold[i.id] > 12);
        let h3 = quizDB.filter(i => stats.quiz[i.id] > 0);
        
        if(h1.length + h2.length + h3.length === 0) {
            div.innerHTML = '<div style="text-align:center; padding:30px; color:#aaa;">æš‚æ— é«˜é¢‘é”™é¢˜</div>';
            return;
        }
        
        let html = '';
        h1.forEach(i => html += `<div class="mistake-item"><div><span style="color:var(--blue-mode);font-weight:bold;">[é•¿éš¾å¥]</span> ${i.cn}</div><div style="font-weight:bold;color:#e74c3c">${Math.floor(stats.big[i.id])}</div></div>`);
        h2.forEach(i => html += `<div class="mistake-item"><div><span style="color:var(--gold-mode);font-weight:bold;">[é‡‘å¥]</span> ${i.cn}</div><div style="font-weight:bold;color:#e74c3c">${Math.floor(stats.gold[i.id])}</div></div>`);
        h3.forEach(i => html += `<div class="mistake-item"><div><span style="color:var(--green-mode);font-weight:bold;">[é€‰æ‹©]</span> ${i.q.substring(0,40)}...</div><div style="font-weight:bold;color:#e74c3c">é”™${stats.quiz[i.id]}</div></div>`);
        div.innerHTML = html;
    }

    function exportPDF() {
        if(window.pdfLoadError) return alert("ç½‘ç»œåŸå› å¯¼è‡´ PDF ç»„ä»¶åŠ è½½å¤±è´¥ã€‚");
        const doc = new window.jspdf.jsPDF();
        doc.text("Mistakes Review", 10, 10);
        let y = 20; doc.setFontSize(10);
        bigTransDB.filter(i=>stats.big[i.id]>12).forEach(i => {
            let lines = doc.splitTextToSize(i.en, 180); doc.text(lines, 10, y); y += lines.length * 5 + 5;
        });
        doc.save('mistakes.pdf');
    }

    function hardReset() {
        if(confirm("ç¡®å®šæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼Ÿ")) { localStorage.removeItem(KEY_STATS); location.reload(); }
    }
</script>
</body>
</html>
